---
- name: Deploy Database for wordpress
- hosts: databases
  become: true
  vars:
#    ansible_sudo_pass: 'ansible'
    ansible_ssh_private_key_file=~/.ssh/aws.pem
  roles:
    - { role: common, tags: common }
    - { role: mariadb, tags: mariadb }
    - { role: haproxy, cluster_service: db_cluster, tags: haproxy }
    - { role: keepalived, cluster_service: db_cluster tags: keepalived }

- name: Deploy Application for wordpress
  hosts: wp
  become: true
  roles:
    - { role: common, tags: common }
    - { role: nginx, tags: nginx }
    - { role: php-fpm, tags: php-fpm }
    - { role: wordpress, tags: wordpress }
- name: Deploy LoadBalancer for wordpress
  hosts: lbs
  become: true
  roles:
    - { role: common, tags: common }
    - { role: haproxy, cluster_service: app_cluster, tags: haproxy }
    - { role: keepalived, cluster_service: app_cluster, tags: keepalived }
